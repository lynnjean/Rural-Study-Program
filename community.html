<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì»¤ë®¤ë‹ˆí‹° - ì‹œê³¨ì¹œêµ¬</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Pretendard:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="styles.css" rel="stylesheet" />
    <style>
      /* ì»¤ë®¤ë‹ˆí‹° ì „ìš© ìŠ¤íƒ€ì¼ */
      .community-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem 1rem 4rem;
      }

      /* ì¹´í…Œê³ ë¦¬ ì›í˜• ë²„íŠ¼ */
      .category-circles {
        display: flex !important;
        justify-content: center;
        gap: 0.75rem;
        overflow-x: auto;
        padding: 1rem 0 2rem;
        margin-bottom: 1rem;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      .category-circles::-webkit-scrollbar {
        display: none;
      }

      .category-circle {
        flex-shrink: 0 !important;
        width: 80px !important;
        height: 80px !important;
        border-radius: 50% !important;
        background: white !important;
        border: 2px solid #1a7f3e !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        color: #1a7f3e !important;
        text-decoration: none !important;
        transition: all 0.3s ease !important;
        position: relative !important;
        overflow: hidden !important;
        padding: 0.5rem !important;
        gap: 0.2rem !important;
        box-shadow: 0 2px 8px rgba(26, 127, 62, 0.1) !important;
      }

      .category-circle:hover {
        transform: scale(1.05);
        color: white !important;
        background: #1a7f3e !important;
        border-color: #1a7f3e !important;
        box-shadow: 0 4px 15px rgba(26, 127, 62, 0.3);
      }

      .category-icon {
        font-size: 1.4rem !important;
        line-height: 1 !important;
        color: #1a7f3e !important;
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        transition: color 0.3s ease !important;
      }

      .category-text {
        font-size: 0.65rem !important;
        font-weight: 600 !important;
        line-height: 1 !important;
        text-align: center !important;
        white-space: nowrap !important;
        color: #1a7f3e !important;
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        transition: color 0.3s ease !important;
      }

      .category-circle:hover .category-icon,
      .category-circle:hover .category-text {
        color: white !important;
      }

      .category-item {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ê°•ì œ í‘œì‹œ */
      .category-circles .category-circle {
        visibility: visible !important;
        opacity: 1 !important;
        display: flex !important;
      }

      /* ë§ˆì œíŠ¸ë¦¬ ê·¸ë¦¬ë“œ */
      .masonry-grid {
        column-count: 4;
        column-gap: 1rem;
        margin-top: 2rem;
      }

      .post-card {
        break-inside: avoid;
        margin-bottom: 1rem;
        background: white;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        transition: var(--transition-base);
        cursor: pointer;
        position: relative;
      }

      .post-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-color);
      }

      .post-image {
        width: 100%;
        height: auto;
        display: block;
        object-fit: cover;
      }

      .post-content {
        padding: 1rem;
      }

      .post-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--gray-800);
        line-height: 1.4;
        margin-bottom: 0.5rem;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .post-author {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.75rem;
      }

      .author-avatar {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        object-fit: cover;
      }

      .author-name {
        font-size: 0.8rem;
        color: var(--gray-600);
        font-weight: 500;
      }

      .post-stats {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 0.8rem;
        color: var(--gray-500);
      }

      .stat-item {
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }

      .bookmark-btn {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--gray-600);
        font-size: 0.9rem;
        cursor: pointer;
        transition: var(--transition-base);
        opacity: 0;
      }

      .post-card:hover .bookmark-btn {
        opacity: 1;
      }

      .bookmark-btn:hover {
        background: white;
        color: var(--primary-color);
        transform: scale(1.1);
      }

      .bookmark-btn.bookmarked {
        color: var(--primary-color);
        background: rgba(26, 127, 62, 0.1);
      }

      /* íŠ¹ë³„ í¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
      .post-card.featured {
        background: var(--gradient-primary);
        color: white;
      }

      .post-card.featured .post-title,
      .post-card.featured .author-name,
      .post-card.featured .post-stats {
        color: white;
      }

      .post-card.featured .bookmark-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      /* ìƒë‹¨ í—¤ë” */
      .community-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .community-title {
        font-size: 2rem;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
      }

      .community-subtitle {
        color: var(--gray-600);
        font-size: 1.1rem;
        font-weight: 400;
      }

      /* ë°˜ì‘í˜• ë””ìì¸ */
      @media (max-width: 992px) {
        .masonry-grid {
          column-count: 3;
        }
      }

      @media (max-width: 768px) {
        .masonry-grid {
          column-count: 2;
          column-gap: 0.75rem;
        }

        .community-container {
          padding: 1.5rem 1rem 3rem;
        }

        .category-circles {
          justify-content: flex-start;
          gap: 0.5rem;
          padding: 0.75rem 0 1.5rem;
        }

        .category-circle {
          width: 65px;
          height: 65px;
          gap: 0.15rem;
        }

        .category-icon {
          font-size: 1.1rem;
        }

        .category-text {
          font-size: 0.6rem;
        }
      }

      @media (max-width: 576px) {
        .masonry-grid {
          column-count: 1;
        }

        .community-title {
          font-size: 1.6rem;
        }

        .community-subtitle {
          font-size: 1rem;
        }
      }

      /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
      .loading-skeleton {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e0e0e0 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* í”Œë¡œíŒ… ë²„íŠ¼ */
      .floating-write-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: var(--gradient-primary);
        border: none;
        color: white;
        font-size: 1.2rem;
        box-shadow: var(--shadow-color);
        cursor: pointer;
        transition: var(--transition-base);
        z-index: 1000;
      }

      .floating-write-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 8px 30px rgba(26, 127, 62, 0.4);
      }

      /* ìƒë‹¨ í•„í„° */
      .filter-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        overflow-x: auto;
        padding-bottom: 0.5rem;
      }

      .filter-tab {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        background: var(--gray-100);
        color: var(--gray-600);
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 500;
        transition: var(--transition-base);
        white-space: nowrap;
        border: 1px solid var(--gray-200);
      }

      .filter-tab:hover,
      .filter-tab.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top"
    >
      <div class="container">
        <a class="navbar-brand fw-bold text-primary" href="index.html">
          <i class="fas fa-seedling me-2"></i>ì‹œê³¨ì¹œêµ¬
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">í™ˆ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="regions.html">ì§€ì—­ì •ë³´</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#matchingModal"
                >AIë§¤ì¹­</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="community.html">ì»¤ë®¤ë‹ˆí‹°</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">ë¬¸ì˜í•˜ê¸°</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#applicationModal"
                >ì‹ ì²­í•˜ê¸°</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- ì»¤ë®¤ë‹ˆí‹° ì»¨í…Œì´ë„ˆ -->
    <div class="community-container">
      <!-- í—¤ë” -->
      <div class="community-header">
        <h1 class="community-title">ë†ì´Œìƒí™œ ìŠ¤íƒ€ì¼</h1>
        <p class="community-subtitle">
          ì‹œê³¨ì¹œêµ¬ë“¤ì˜ ì¼ìƒê³¼ ë†ì´Œ ê²½í—˜ì„ ê³µìœ í•´ë³´ì„¸ìš”
        </p>
      </div>

      <!-- ì¹´í…Œê³ ë¦¬ ì›í˜• ë²„íŠ¼ -->
      <div class="category-circles">
        <div class="category-item">
          <a href="#" class="category-circle" data-category="daily">
            <i class="fas fa-sun category-icon"></i>
            <span class="category-text">ì¼ìƒ</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="farming">
            <i class="fas fa-seedling category-icon"></i>
            <span class="category-text">ë†ì‚¬ì²´í—˜</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="food">
            <i class="fas fa-utensils category-icon"></i>
            <span class="category-text">ì‹œê³¨ìŒì‹</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="nature">
            <i class="fas fa-mountain category-icon"></i>
            <span class="category-text">ìì—°í’ê²½</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="culture">
            <i class="fas fa-masks-theater category-icon"></i>
            <span class="category-text">ë¬¸í™”ì²´í—˜</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="animal">
            <i class="fas fa-dog category-icon"></i>
            <span class="category-text">ë™ë¬¼ì¹œêµ¬</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="season">
            <i class="fas fa-leaf category-icon"></i>
            <span class="category-text">ê³„ì ˆë†ì‚¬</span>
          </a>
        </div>
        <div class="category-item">
          <a href="#" class="category-circle" data-category="festival">
            <i class="fas fa-music category-icon"></i>
            <span class="category-text">ë§ˆì„ì¶•ì œ</span>
          </a>
        </div>
      </div>

      <!-- í•„í„° íƒ­ -->
      <div class="filter-tabs">
        <a href="#" class="filter-tab active" data-filter="all">ì „ì²´</a>
        <a href="#" class="filter-tab" data-filter="popular">ì¸ê¸°</a>
        <a href="#" class="filter-tab" data-filter="recent">ìµœì‹ </a>
        <a href="#" class="filter-tab" data-filter="following">íŒ”ë¡œì‰</a>
      </div>

      <!-- ë§ˆì œíŠ¸ë¦¬ ê·¸ë¦¬ë“œ -->
      <div class="masonry-grid" id="postsGrid">
        <!-- í¬ìŠ¤íŠ¸ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
      </div>
    </div>

    <!-- í”Œë¡œíŒ… ê¸€ì“°ê¸° ë²„íŠ¼ -->
    <button class="floating-write-btn" onclick="openWriteModal()">
      <i class="fas fa-pen"></i>
    </button>

    <!-- í¬ìŠ¤íŠ¸ ìƒì„¸ ëª¨ë‹¬ -->
    <div class="modal fade" id="postDetailModal" tabindex="-1">
      <!-- ëª¨ë‹¬ ì™¸ë¶€ X ë‹«ê¸° ë²„íŠ¼ -->
      <button
        type="button"
        class="btn position-fixed modal-close-btn"
        data-bs-dismiss="modal"
        style="
          top: 1rem;
          right: 1rem;
          z-index: 1055;
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: none;
          border: none;
          color: rgba(255, 255, 255, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.1rem;
        "
      >
        <i class="fas fa-times"></i>
      </button>

      <style>
        .modal-close-btn:hover {
          background: none !important;
          color: rgba(255, 255, 255, 1) !important;
          transform: none !important;
        }

        .follow-btn:hover {
          background-color: #f8f9fa !important;
          border-color: #6c757d !important;
          color: #495057 !important;
        }

        .follow-btn.following {
          background-color: #1a7f3e !important;
          border-color: #1a7f3e !important;
          color: white !important;
        }

        .follow-btn.following:hover {
          background-color: #dc3545 !important;
          border-color: #dc3545 !important;
          color: white !important;
        }
      </style>

      <div class="modal-dialog modal-lg">
        <div
          class="modal-content"
          style="border-radius: 20px; overflow: hidden"
        >
          <div class="modal-header border-0 p-0"></div>

          <div class="modal-body p-0">
            <!-- ìƒë‹¨ ìœ ì € ì •ë³´ -->
            <div
              class="d-flex align-items-center justify-content-between p-4 border-bottom"
            >
              <div class="d-flex align-items-center">
                <img
                  id="modalAuthorAvatar"
                  src=""
                  alt=""
                  class="rounded-circle me-3"
                  style="width: 40px; height: 40px; object-fit: cover"
                />
                <div>
                  <h6
                    id="modalAuthorName"
                    class="mb-0 fw-bold"
                    style="font-size: 1rem"
                  ></h6>
                  <small class="text-muted">ë†ì´Œìœ í•™ìƒ</small>
                </div>
              </div>
              <div class="d-flex align-items-center gap-2">
                <button
                  id="followBtn"
                  class="btn btn-sm follow-btn"
                  onclick="toggleFollow()"
                  style="
                    font-size: 0.85rem;
                    padding: 0.5rem 1rem;
                    border-radius: 8px;
                    background: none;
                    border: 1px solid #dee2e6;
                    color: #6c757d;
                    transition: all 0.2s ease;
                  "
                >
                  íŒ”ë¡œìš°
                </button>
                <div class="dropdown">
                  <button
                    class="btn btn-link p-0 text-muted"
                    type="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fas fa-ellipsis-h"></i>
                  </button>
                  <ul
                    class="dropdown-menu dropdown-menu-end"
                    style="
                      min-width: 200px;
                      border-radius: 12px;
                      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                    "
                  >
                    <li>
                      <a
                        class="dropdown-item d-flex align-items-center py-3"
                        href="#"
                        onclick="sharePost()"
                      >
                        <i class="fas fa-share me-3" style="width: 16px"></i>
                        ê²Œì‹œë¬¼ ê³µìœ 
                      </a>
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a
                        class="dropdown-item d-flex align-items-center py-3 text-danger"
                        href="#"
                        onclick="blockProfile()"
                      >
                        <i class="fas fa-ban me-3" style="width: 16px"></i>
                        í”„ë¡œí•„ ì°¨ë‹¨
                      </a>
                    </li>
                    <li>
                      <a
                        class="dropdown-item d-flex align-items-center py-3 text-danger"
                        href="#"
                        onclick="reportProfile()"
                      >
                        <i class="fas fa-flag me-3" style="width: 16px"></i>
                        í”„ë¡œí•„ ì‹ ê³ 
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- ë©”ì¸ ì´ë¯¸ì§€ -->
            <div
              class="position-relative"
              style="height: 400px; background: #f8f9fa"
            >
              <img
                id="modalPostImage"
                src=""
                alt=""
                class="w-100 h-100"
                style="object-fit: cover"
              />

              <!-- ì´ë¯¸ì§€ ì¸ë””ì¼€ì´í„° -->
              <div
                class="position-absolute bottom-0 start-50 translate-middle-x mb-3"
              >
                <div class="d-flex gap-2">
                  <div
                    class="bg-white rounded-pill"
                    style="width: 6px; height: 6px"
                  ></div>
                  <div
                    class="bg-white-50 rounded-pill"
                    style="width: 6px; height: 6px; opacity: 0.5"
                  ></div>
                  <div
                    class="bg-white-50 rounded-pill"
                    style="width: 6px; height: 6px; opacity: 0.5"
                  ></div>
                </div>
              </div>
            </div>

            <!-- í•˜ë‹¨ ì •ë³´ ì„¹ì…˜ -->
            <div class="bg-white p-4">
              <!-- ì œëª©ê³¼ ì„¤ëª… -->
              <div class="mb-3">
                <h5
                  id="modalPostTitle"
                  class="mb-2 fw-bold"
                  style="font-size: 1.1rem"
                ></h5>
                <p
                  id="modalPostDescription"
                  class="text-muted mb-0"
                  style="font-size: 0.9rem; line-height: 1.5"
                ></p>
              </div>

              <!-- ìƒí’ˆ íƒœê·¸ -->
              <div class="mb-3" id="productTags">
                <!-- ë†ì´Œ ìƒí’ˆë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
              </div>

              <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
              <div
                class="d-flex align-items-center justify-content-between border-top border-bottom py-3 mb-3"
              >
                <div class="d-flex align-items-center gap-4">
                  <button
                    class="btn btn-link p-0 d-flex align-items-center"
                    onclick="toggleLike()"
                    style="color: #dc3545; text-decoration: none"
                  >
                    <i class="fas fa-heart me-2"></i>
                    <span id="modalLikesCount" style="font-size: 0.9rem"
                      >0</span
                    >
                  </button>
                  <button
                    class="btn btn-link p-0 d-flex align-items-center text-muted"
                    style="text-decoration: none"
                  >
                    <i class="fas fa-comment me-2"></i>
                    <span id="modalCommentsCount" style="font-size: 0.9rem"
                      >0</span
                    >
                  </button>
                  <button
                    class="btn btn-link p-0 text-muted"
                    style="text-decoration: none"
                  >
                    <i class="fas fa-share me-1"></i>
                    <span style="font-size: 0.9rem">ê³µìœ </span>
                  </button>
                </div>
                <button
                  class="btn btn-link p-0 text-muted"
                  style="text-decoration: none"
                >
                  <i class="fas fa-bookmark me-1"></i>
                  <span style="font-size: 0.9rem">ì €ì¥</span>
                </button>
              </div>

              <!-- í•´ì‹œíƒœê·¸ -->
              <div class="mb-3">
                <div class="d-flex flex-wrap gap-2" id="hashtagsList">
                  <!-- í•´ì‹œíƒœê·¸ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
              </div>

              <!-- ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë“¤ -->
              <div class="mb-3">
                <div
                  class="d-flex align-items-center justify-content-between mb-3"
                >
                  <h6
                    class="mb-0 fw-bold"
                    id="otherStylesTitle"
                    style="font-size: 0.95rem"
                  >
                    @userë‹˜ì˜ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼
                  </h6>
                  <small class="text-muted" style="cursor: pointer"
                    >ë”ë³´ê¸°</small
                  >
                </div>

                <div class="row g-2" id="otherStylesGrid">
                  <!-- ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // ìƒ˜í”Œ í¬ìŠ¤íŠ¸ ë°ì´í„°
      const samplePosts = [
        {
          id: 1,
          title: "í‰ì°½ ê°ìë°­ì—ì„œì˜ í•˜ë£¨",
          image:
            "https://images.unsplash.com/photo-1560493676-04071c5f467b?w=400&h=500&fit=crop",
          author: "ë†ë¶€ê¹€ì² ìˆ˜",
          avatar:
            "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",
          likes: 142,
          comments: 23,
          category: "farming",
          featured: false,
        },
        {
          id: 2,
          title: "ì‹œê³¨ì¹œêµ¬ ì±Œë¦°ì§€",
          image: "",
          author: "ì‹œê³¨ì¹œêµ¬",
          avatar:
            "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",
          likes: 1204,
          comments: 89,
          category: "challenge",
          featured: true,
          description:
            "ë†ì´Œ ìƒí™œì˜ ë§¤ë ¥ì„ ë„ë¦¬ ì•Œë¦¬ê¸° ìœ„í•œ #ì‹œê³¨ì¹œêµ¬ ì±Œë¦°ì§€ì— ì°¸ì—¬í•´ë³´ì„¸ìš”!",
        },
        {
          id: 3,
          title: "í• ë¨¸ë‹ˆê°€ ì•Œë ¤ì£¼ì‹  ëœì¥ì°Œê°œ ë ˆì‹œí”¼",
          image:
            "https://images.unsplash.com/photo-1547592180-85f173990554?w=400&h=600&fit=crop",
          author: "ë†ì´Œìš”ë¦¬ì‚¬",
          avatar:
            "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face",
          likes: 89,
          comments: 34,
          category: "food",
          featured: false,
        },
        {
          id: 4,
          title: "ê°•ì›ë„ ì‚°ê³¨ë§ˆì„ ì‚°ì±…ê¸¸",
          image:
            "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=700&fit=crop",
          author: "ì‚°ê³¨ì†Œë…€",
          avatar:
            "https://images.unsplash.com/photo-1489424731084-a5d8b219a5bb?w=40&h=40&fit=crop&crop=face",
          likes: 156,
          comments: 12,
          category: "nature",
          featured: false,
        },
        {
          id: 5,
          title: "ìš°ë¦¬ ë§ˆì„ ë³µì‹¤ì´",
          image:
            "https://images.unsplash.com/photo-1583337130417-3346a1be7dee?w=400&h=500&fit=crop",
          author: "ë™ë¬¼ì‚¬ë‘",
          avatar:
            "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",
          likes: 234,
          comments: 45,
          category: "animal",
          featured: false,
        },
        {
          id: 6,
          title: "ì „ë‚¨ ê³ í¥ ìœ ìë”°ê¸° ì²´í—˜",
          image:
            "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=400&h=600&fit=crop",
          author: "ìœ ìë†ë¶€",
          avatar:
            "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=face",
          likes: 98,
          comments: 19,
          category: "season",
          featured: false,
        },
        {
          id: 7,
          title: "ë§ˆì„ í• ë¨¸ë‹ˆë“¤ê³¼ í•¨ê»˜í•œ ê¹€ì¥",
          image:
            "https://images.unsplash.com/photo-1582731453726-b9bc16d78be9?w=400&h=800&fit=crop",
          author: "ê¹€ì¥ë‹¨ì¥",
          avatar:
            "https://images.unsplash.com/photo-1534308143481-c55c1c71e96e?w=40&h=40&fit=crop&crop=face",
          likes: 187,
          comments: 56,
          category: "culture",
          featured: false,
        },
        {
          id: 8,
          title: "ì „ë¶ ì •ì ë²šê½ƒì¶•ì œ",
          image:
            "https://images.unsplash.com/photo-1522383225653-ed111181a951?w=400&h=500&fit=crop",
          author: "ì¶•ì œëŸ¬ë²„",
          avatar:
            "https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?w=40&h=40&fit=crop&crop=face",
          likes: 267,
          comments: 78,
          category: "festival",
          featured: false,
        },
        {
          id: 9,
          title: "ì•„ì¹¨ ì¼ì° ë‹­ë“¤ì—ê²Œ ëª¨ì´ ì£¼ê¸°",
          image:
            "https://images.unsplash.com/photo-1548550023-2bdb3c5beed7?w=400&h=600&fit=crop",
          author: "ìƒˆë²½ë†ë¶€",
          avatar:
            "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",
          likes: 45,
          comments: 8,
          category: "daily",
          featured: false,
        },
        {
          id: 10,
          title: "ìš°ë¦¬ ë§ˆì„ í† ì¢…ë²Œ ê´€ì°°ì¼ê¸°",
          image:
            "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=500&fit=crop",
          author: "ê¿€ë²Œì§€ê¸°",
          avatar:
            "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",
          likes: 78,
          comments: 15,
          category: "animal",
          featured: false,
        },
        {
          id: 11,
          title: "ì•„ì¹¨ì— ì¼ì–´ë‚˜ ë°”ë¼ë³¸ ì•ˆê°œ ë‚€ ë…¼",
          image:
            "https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=400&h=700&fit=crop",
          author: "ìƒˆë²½í’ê²½",
          avatar:
            "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face",
          likes: 234,
          comments: 32,
          category: "daily",
          featured: false,
        },
        {
          id: 12,
          title: "ì „í†µ ë†ê¸°êµ¬ ì²´í—˜í•˜ê¸°",
          image:
            "https://images.unsplash.com/photo-1464822759844-d150baec0493?w=400&h=600&fit=crop",
          author: "ì „í†µë†ë²•",
          avatar:
            "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=face",
          likes: 156,
          comments: 28,
          category: "culture",
          featured: false,
        },
      ];

      // í¬ìŠ¤íŠ¸ ë Œë”ë§ í•¨ìˆ˜
      function renderPosts(posts = samplePosts) {
        const grid = document.getElementById("postsGrid");
        grid.innerHTML = "";

        posts.forEach((post) => {
          const postElement = createPostElement(post);
          grid.appendChild(postElement);
        });
      }

      // í¬ìŠ¤íŠ¸ ìš”ì†Œ ìƒì„± í•¨ìˆ˜
      function createPostElement(post) {
        const div = document.createElement("div");
        div.className = `post-card ${post.featured ? "featured" : ""}`;
        div.onclick = () => openPostDetail(post);

        if (post.featured) {
          div.innerHTML = `
                    <div class="post-content" style="padding: 2rem; min-height: 200px; display: flex; flex-direction: column; justify-content: center;">
                        <div style="text-align: center;">
                            <i class="fas fa-star" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.8;"></i>
                            <h3 class="post-title" style="font-size: 1.2rem; margin-bottom: 1rem;">${
                              post.title
                            }</h3>
                            <p style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 1.5rem;">${
                              post.description || ""
                            }</p>
                            <div class="post-stats">
                                <div class="stat-item">
                                    <i class="fas fa-heart"></i>
                                    <span>${post.likes}</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-comment"></i>
                                    <span>${post.comments}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="bookmark-btn" onclick="toggleBookmark(event, ${
                      post.id
                    })">
                        <i class="fas fa-bookmark"></i>
                    </button>
                `;
        } else {
          div.innerHTML = `
                    ${
                      post.image
                        ? `<img src="${post.image}" alt="${post.title}" class="post-image">`
                        : ""
                    }
                    <div class="post-content">
                        <div class="post-author">
                            <img src="${post.avatar}" alt="${
            post.author
          }" class="author-avatar">
                            <span class="author-name">${post.author}</span>
                        </div>
                        <h3 class="post-title">${post.title}</h3>
                        <div class="post-stats">
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span>${post.likes}</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-comment"></i>
                                <span>${post.comments}</span>
                            </div>
                        </div>
                    </div>
                    <button class="bookmark-btn" onclick="toggleBookmark(event, ${
                      post.id
                    })">
                        <i class="fas fa-bookmark"></i>
                    </button>
                `;
        }

        return div;
      }

      // ë¶ë§ˆí¬ í† ê¸€ í•¨ìˆ˜
      function toggleBookmark(event, postId) {
        event.stopPropagation();
        const btn = event.currentTarget;
        btn.classList.toggle("bookmarked");

        if (btn.classList.contains("bookmarked")) {
          showToast("ë¶ë§ˆí¬ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤", "success");
        } else {
          showToast("ë¶ë§ˆí¬ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤", "info");
        }
      }

      // í˜„ì¬ í¬ìŠ¤íŠ¸ ë°ì´í„°
      let currentPost = null;

      // í¬ìŠ¤íŠ¸ ìƒì„¸ ë³´ê¸°
      function openPostDetail(post) {
        currentPost = post;

        // ëª¨ë‹¬ ìš”ì†Œë“¤ ì—…ë°ì´íŠ¸
        document.getElementById("modalPostImage").src =
          post.image ||
          "https://images.unsplash.com/photo-1560493676-04071c5f467b?w=800&h=600&fit=crop";
        document.getElementById("modalAuthorAvatar").src = post.avatar;
        document.getElementById("modalAuthorName").textContent = post.author;
        document.getElementById("modalPostTitle").textContent = post.title;
        document.getElementById("modalPostDescription").textContent =
          getPostDescription(post);
        document.getElementById("modalLikesCount").textContent = post.likes;
        document.getElementById("modalCommentsCount").textContent =
          post.comments;

        // ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ ì œëª© ì—…ë°ì´íŠ¸
        document.getElementById(
          "otherStylesTitle"
        ).textContent = `@${post.author}ë‹˜ì˜ ë‹¤ë¥¸ ê²Œì‹œë¬¼`;

        // íŒ”ë¡œìš° ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        updateFollowButtonState(post.author);

        // ìƒí’ˆ íƒœê·¸ ë¡œë“œ
        loadProductTags(post);

        // ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë“¤ ë¡œë“œ
        loadOtherStyles(post);

        // í•´ì‹œíƒœê·¸ ë¡œë“œ
        loadHashtags(post);

        // ëª¨ë‹¬ ì—´ê¸°
        const modal = new bootstrap.Modal(
          document.getElementById("postDetailModal")
        );
        modal.show();
      }

      // ìƒí’ˆ íƒœê·¸ ë¡œë“œ (ë†ì´Œ ê´€ë ¨ ì•„ì´í…œë“¤)
      function loadProductTags(post) {
        const productTags = document.getElementById("productTags");
        const products = getProductsForPost(post);

        if (products.length === 0) {
          productTags.innerHTML = "";
          return;
        }

        productTags.innerHTML = products
          .map(
            (product) => `
                <div class="d-flex align-items-center p-3 bg-light rounded-3 mb-2" style="cursor: pointer; border: 1px solid #e9ecef;">
                    <img src="${product.image}" alt="${product.name}" class="me-3" style="width: 44px; height: 44px; object-fit: cover; border-radius: 8px;">
                    <div class="flex-grow-1">
                        <div class="fw-bold mb-1" style="font-size: 0.85rem; color: #333;">${product.name}</div>
                        <div class="fw-bold" style="font-size: 0.8rem; color: #1A7F3E;">${product.price}</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: #666; font-size: 0.8rem;"></i>
                </div>
            `
          )
          .join("");
      }

      // ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë“¤ ë¡œë“œ
      function loadOtherStyles(post) {
        const otherStylesGrid = document.getElementById("otherStylesGrid");
        const otherPosts = samplePosts
          .filter((p) => p.author === post.author && p.id !== post.id)
          .slice(0, 4);

        otherStylesGrid.innerHTML = otherPosts
          .map(
            (otherPost) => `
                <div class="col-3">
                    <div class="position-relative" style="cursor: pointer;" onclick="openPostDetail(${JSON.stringify(
                      otherPost
                    ).replace(/"/g, "&quot;")})">
                        <img src="${otherPost.image}" alt="${
              otherPost.title
            }" class="w-100 rounded" style="aspect-ratio: 1; object-fit: cover;">
                        <div class="position-absolute top-0 start-0 m-2">
                            <span class="badge bg-dark">${
                              otherPost.likes
                            }</span>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");
      }

      // í•´ì‹œíƒœê·¸ ë¡œë“œ
      function loadHashtags(post) {
        const hashtagsList = document.getElementById("hashtagsList");
        const hashtags = getHashtagsForPost(post);

        hashtagsList.innerHTML = hashtags
          .map(
            (tag) => `
                <span class="badge bg-light text-dark border" style="cursor: pointer;">#${tag}</span>
            `
          )
          .join("");
      }

      // í¬ìŠ¤íŠ¸ë³„ ìƒí’ˆ ì •ë³´
      function getProductsForPost(post) {
        const products = {
          1: [
            {
              name: "í‰ì°½ ê°ì 1ë°•ìŠ¤",
              price: "15,000ì›",
              image:
                "https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=80&h=80&fit=crop",
            },
          ],
          3: [
            {
              name: "ì „í†µ ëœì¥ 500g",
              price: "12,000ì›",
              image:
                "https://images.unsplash.com/photo-1606491956689-2ea866880c84?w=80&h=80&fit=crop",
            },
          ],
          6: [
            {
              name: "ê³ í¥ ìœ ìì²­ 300ml",
              price: "18,000ì›",
              image:
                "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=80&h=80&fit=crop",
            },
          ],
        };
        return products[post.id] || [];
      }

      // í¬ìŠ¤íŠ¸ë³„ í•´ì‹œíƒœê·¸
      function getHashtagsForPost(post) {
        const hashtags = {
          1: ["í‰ì°½ê°ì", "ë†ì‚¬ì²´í—˜", "ì‹œê³¨ì¹œêµ¬", "ê°ììˆ˜í™•"],
          3: ["ì „í†µëœì¥", "í• ë¨¸ë‹ˆë ˆì‹œí”¼", "ì‹œê³¨ìŒì‹", "ê±´ê°•ì‹í’ˆ"],
          4: ["ê°•ì›ë„", "ì‚°ê³¨ë§ˆì„", "ìì—°í’ê²½", "íë§"],
          5: ["ë™ë¬¼ì¹œêµ¬", "ë³µì‹¤ì´", "ë†ì´Œìƒí™œ", "ë°˜ë ¤ë™ë¬¼"],
          6: ["ê³ í¥ìœ ì", "ê³„ì ˆë†ì‚¬", "ìœ ìë”°ê¸°", "ì „ë‚¨"],
          7: ["ê¹€ì¥", "ë¬¸í™”ì²´í—˜", "ì „í†µ", "ë§ˆì„ê³µë™ì²´"],
          8: ["ë²šê½ƒì¶•ì œ", "ì •ì", "ë§ˆì„ì¶•ì œ", "ë´„"],
          9: ["ì¼ìƒ", "ìƒˆë²½ë†ì¥", "ë‹­í‚¤ìš°ê¸°", "ë†ì´Œì¼ìƒ"],
          10: ["í† ì¢…ë²Œ", "ì–‘ë´‰", "ë™ë¬¼ì¹œêµ¬", "ê¿€"],
          11: ["ì•ˆê°œë‚€ë…¼", "ì¼ìƒ", "ë†ì´Œí’ê²½", "ìƒˆë²½"],
          12: ["ì „í†µë†ê¸°êµ¬", "ë¬¸í™”ì²´í—˜", "ë†ì—…ì—­ì‚¬", "ì²´í—˜í•™ìŠµ"],
        };
        return hashtags[post.id] || ["ë†ì´Œìƒí™œ", "ì‹œê³¨ì¹œêµ¬"];
      }

      // í¬ìŠ¤íŠ¸ ì„¤ëª… ìƒì„±
      function getPostDescription(post) {
        const descriptions = {
          1: "ì˜¤ëŠ˜ í‰ì°½ì˜ ê°ìë°­ì—ì„œ ì¼í•˜ë©´ì„œ ëŠë‚€ ì†Œì¤‘í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. ë§‘ì€ ê³µê¸°ì™€ ë”°ëœ»í•œ í–‡ì‚´ ì•„ë˜ì„œ ì§ì ‘ ê¸°ë¥¸ ê°ìë¥¼ ìˆ˜í™•í•˜ëŠ” ê¸°ì¨ì´ ì •ë§ íŠ¹ë³„í–ˆì–´ìš”!",
          3: "ë†ì´Œì—ì„œ í• ë¨¸ë‹ˆê°€ ì§ì ‘ ì•Œë ¤ì£¼ì‹  ì „í†µ ëœì¥ì°Œê°œ ë ˆì‹œí”¼ì…ë‹ˆë‹¤. ì‹œê³¨ì—ì„œë§Œ ë§›ë³¼ ìˆ˜ ìˆëŠ” ê¹Šì€ ë§›ì˜ ë¹„ê²°ì„ ê³µê°œí•©ë‹ˆë‹¤.",
          4: "ê°•ì›ë„ ê¹Šì€ ì‚°ê³¨ë§ˆì„ì˜ ìˆ¨ê²¨ì§„ ì‚°ì±…ê¸¸ì„ ë°œê²¬í–ˆì–´ìš”. ìƒˆì†Œë¦¬ì™€ ì‹œëƒ‡ë¬¼ ì†Œë¦¬ê°€ í•¨ê»˜í•˜ëŠ” íë§ ì‚°ì±…ì½”ìŠ¤ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.",
          5: "ìš°ë¦¬ ë§ˆì„ì˜ ê·€ì—¬ìš´ ê°œ ë³µì‹¤ì´ì™€ì˜ ì¼ìƒì„ ë‹´ì•˜ìŠµë‹ˆë‹¤. ë†ì´Œì—ì„œ ë§Œë‚œ ë™ë¬¼ì¹œêµ¬ë“¤ê³¼ì˜ íŠ¹ë³„í•œ ìš°ì • ì´ì•¼ê¸°ì˜ˆìš”.",
          6: "ì „ë‚¨ ê³ í¥ì˜ ìœ ìë†ì¥ì—ì„œ ì§ì ‘ ì²´í—˜í•œ ìœ ìë”°ê¸°! ì†ìœ¼ë¡œ ì§ì ‘ ë”°ëŠ” ìœ ìì˜ í–¥ê¸‹í•¨ê³¼ ë†ë¶€ë‹˜ë“¤ì˜ ì •ì„±ì„ ëŠë‚„ ìˆ˜ ìˆì—ˆì–´ìš”.",
          7: "ë§ˆì„ í• ë¨¸ë‹ˆë“¤ê³¼ í•¨ê»˜í•œ ê¹€ì¥ ë‹´ê·¸ê¸° ì²´í—˜. ì „í†µ ë°©ì‹ ê·¸ëŒ€ë¡œ ë‹´ê·¸ëŠ” ê¹€ì¹˜ì˜ ë§›ê³¼ ì •ì„ ë‚˜ëˆ„ëŠ” ì†Œì¤‘í•œ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤.",
          8: "ì „ë¶ ì •ìì—ì„œ ì—´ë¦° ë²šê½ƒì¶•ì œì— ë‹¤ë…€ì™”ì–´ìš”. ë§Œê°œí•œ ë²šê½ƒê³¼ í•¨ê»˜í•˜ëŠ” ë†ì´Œ ì¶•ì œì˜ ë”°ëœ»í•¨ì„ ëŠê»´ë³´ì„¸ìš”.",
        };
        return (
          descriptions[post.id] || "ë†ì´Œìƒí™œì˜ ì†Œì¤‘í•œ ìˆœê°„ì„ ë‹´ì€ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤."
        );
      }

      // ëŒ“ê¸€ ë°ì´í„°
      const comments = {
        1: [
          {
            author: "ë†ì´Œì‚¬ë‘",
            avatar:
              "https://images.unsplash.com/photo-1551836022-deb4988cc6c0?w=40&h=40&fit=crop&crop=face",
            text: "ê°ì ìˆ˜í™• ì²´í—˜ ì •ë§ ì¢‹ì•„ë³´ì—¬ìš”! ì €ë„ ì°¸ì—¬í•˜ê³  ì‹¶ë„¤ìš” ğŸ¥”",
            time: "2ì‹œê°„ ì „",
          },
          {
            author: "ì‹œê³¨ìƒí™œ",
            avatar:
              "https://images.unsplash.com/photo-1488161628813-04466f872be2?w=40&h=40&fit=crop&crop=face",
            text: "í‰ì°½ ê°ì ì •ë§ ìœ ëª…í•˜ì£ ! ì§ì ‘ ìºë³´ë‹ˆ ì–´ë– ì…¨ë‚˜ìš”?",
            time: "1ì‹œê°„ ì „",
          },
        ],
        3: [
          {
            author: "ìš”ë¦¬ë‹¬ì¸",
            avatar:
              "https://images.unsplash.com/photo-1528892952291-009c663ce843?w=40&h=40&fit=crop&crop=face",
            text: "í• ë¨¸ë‹ˆ ë ˆì‹œí”¼ ìµœê³ ì˜ˆìš”! ê¼­ ë”°ë¼í•´ë³´ê² ìŠµë‹ˆë‹¤ ğŸ‘µ",
            time: "3ì‹œê°„ ì „",
          },
          {
            author: "ëœì¥ì‚¬ë‘",
            avatar:
              "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=40&h=40&fit=crop&crop=face",
            text: "ì „í†µ ë°©ì‹ìœ¼ë¡œ ë§Œë“  ëœì¥ì€ ì •ë§ ë‹¤ë¥´ì£ ",
            time: "2ì‹œê°„ ì „",
          },
        ],
      };

      // ëŒ“ê¸€ ë¡œë“œ
      function loadComments(postId) {
        const commentsList = document.getElementById("commentsList");
        const postComments = comments[postId] || [];

        if (postComments.length === 0) {
          commentsList.innerHTML =
            '<p class="text-muted text-center py-3">ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>';
          return;
        }

        commentsList.innerHTML = postComments
          .map(
            (comment) => `
                <div class="d-flex mb-3">
                    <img src="${comment.avatar}" alt="${comment.author}" class="rounded-circle me-2" style="width: 32px; height: 32px; object-fit: cover;">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center mb-1">
                            <strong class="me-2" style="font-size: 0.9rem;">${comment.author}</strong>
                            <small class="text-muted">${comment.time}</small>
                        </div>
                        <p class="mb-0" style="font-size: 0.9rem;">${comment.text}</p>
                    </div>
                </div>
            `
          )
          .join("");
      }

      // ì¢‹ì•„ìš” í† ê¸€
      function toggleLike() {
        if (!currentPost) return;

        const likesElement = document.getElementById("modalLikesCount");
        const currentLikes = parseInt(likesElement.textContent);
        const isLiked = likesElement.parentElement.classList.contains("liked");

        if (isLiked) {
          likesElement.textContent = currentLikes - 1;
          likesElement.parentElement.classList.remove("liked");
          showToast("ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤", "info");
        } else {
          likesElement.textContent = currentLikes + 1;
          likesElement.parentElement.classList.add("liked");
          showToast("ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ìŠµë‹ˆë‹¤ â¤ï¸", "success");
        }
      }

      // ëŒ“ê¸€ ì¶”ê°€
      function addComment() {
        const input = document.getElementById("commentInput");
        const text = input.value.trim();

        if (!text) return;

        const commentsList = document.getElementById("commentsList");
        const newComment = document.createElement("div");
        newComment.className = "d-flex mb-3";
        newComment.innerHTML = `
                <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=40&h=40&fit=crop&crop=face" alt="ë‚˜" class="rounded-circle me-2" style="width: 32px; height: 32px; object-fit: cover;">
                <div class="flex-grow-1">
                    <div class="d-flex align-items-center mb-1">
                        <strong class="me-2" style="font-size: 0.9rem;">ë‚˜</strong>
                        <small class="text-muted">ë°©ê¸ˆ ì „</small>
                    </div>
                    <p class="mb-0" style="font-size: 0.9rem;">${text}</p>
                </div>
            `;

        commentsList.appendChild(newComment);
        input.value = "";

        // ëŒ“ê¸€ ìˆ˜ ì—…ë°ì´íŠ¸
        const commentsCount = document.getElementById("modalCommentsCount");
        commentsCount.textContent = parseInt(commentsCount.textContent) + 1;

        showToast("ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤", "success");

        // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
        commentsList.scrollTop = commentsList.scrollHeight;
      }

      // ì—”í„°í‚¤ë¡œ ëŒ“ê¸€ ë“±ë¡
      document.addEventListener("DOMContentLoaded", () => {
        const commentInput = document.getElementById("commentInput");
        if (commentInput) {
          commentInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
              addComment();
            }
          });
        }
      });

      // ê¸€ì“°ê¸° ëª¨ë‹¬ (ì¶”í›„ êµ¬í˜„)
      function openWriteModal() {
        showToast("ê¸€ì“°ê¸° ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤", "info");
      }

      // ê²Œì‹œë¬¼ ê³µìœ 
      function sharePost() {
        if (!currentPost) return;

        if (navigator.share) {
          navigator
            .share({
              title: currentPost.title,
              text: `${currentPost.author}ë‹˜ì˜ ë†ì´Œ ìƒí™œ ì´ì•¼ê¸°ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!`,
              url: window.location.href,
            })
            .then(() => {
              showToast("ê²Œì‹œë¬¼ì´ ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤", "success");
            })
            .catch(() => {
              copyToClipboard();
            });
        } else {
          copyToClipboard();
        }
      }

      // í´ë¦½ë³´ë“œì— ë§í¬ ë³µì‚¬
      function copyToClipboard() {
        const url = window.location.href;
        navigator.clipboard
          .writeText(url)
          .then(() => {
            showToast("ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤", "success");
          })
          .catch(() => {
            showToast("ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤", "info");
          });
      }

      // í”„ë¡œí•„ ì°¨ë‹¨
      function blockProfile() {
        if (!currentPost) return;

        if (
          confirm(
            `${currentPost.author}ë‹˜ì„ ì°¨ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì°¨ë‹¨í•˜ë©´ í•´ë‹¹ ì‚¬ìš©ìì˜ ê²Œì‹œë¬¼ì„ ë” ì´ìƒ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`
          )
        ) {
          // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì°¨ë‹¨ ìš”ì²­ì„ ë³´ë‚´ì•¼ í•¨
          showToast(`${currentPost.author}ë‹˜ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤`, "success");

          // ëª¨ë‹¬ ë‹«ê¸°
          const modal = bootstrap.Modal.getInstance(
            document.getElementById("postDetailModal")
          );
          modal.hide();

          // ì°¨ë‹¨ëœ ì‚¬ìš©ìì˜ í¬ìŠ¤íŠ¸ë“¤ì„ í™”ë©´ì—ì„œ ì œê±°
          setTimeout(() => {
            const filteredPosts = samplePosts.filter(
              (post) => post.author !== currentPost.author
            );
            renderPosts(filteredPosts);
          }, 300);
        }
      }

      // í”„ë¡œí•„ ì‹ ê³ 
      function reportProfile() {
        if (!currentPost) return;

        const reasons = [
          "ë¶€ì ì ˆí•œ ì½˜í…ì¸ ",
          "ìŠ¤íŒ¸ ë˜ëŠ” ê´‘ê³ ",
          "ê´´ë¡­í˜ ë˜ëŠ” í˜ì˜¤ ë°œì–¸",
          "í­ë ¥ì ì¸ ë‚´ìš©",
          "ì €ì‘ê¶Œ ì¹¨í•´",
          "ê¸°íƒ€",
        ];

        let reasonsHtml = reasons
          .map(
            (reason, index) =>
              `<label class="d-block mb-2">
                    <input type="radio" name="reportReason" value="${reason}" class="me-2">
                    ${reason}
                </label>`
          )
          .join("");

        const reportModal = document.createElement("div");
        reportModal.className = "modal fade";
        reportModal.innerHTML = `
                <div class="modal-dialog">
                    <div class="modal-content" style="border-radius: 16px;">
                        <div class="modal-header border-0">
                            <h5 class="modal-title fw-bold">ì‹ ê³ í•˜ê¸°</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <p class="text-muted mb-3">${currentPost.author}ë‹˜ì„ ì‹ ê³ í•˜ëŠ” ì´ìœ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”:</p>
                            <div id="reportReasons">
                                ${reasonsHtml}
                            </div>
                            <div class="mt-3">
                                <label class="form-label">ì¶”ê°€ ì„¤ëª… (ì„ íƒì‚¬í•­)</label>
                                <textarea class="form-control" id="reportDescription" rows="3" placeholder="ì‹ ê³  ì‚¬ìœ ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”..."></textarea>
                            </div>
                        </div>
                        <div class="modal-footer border-0">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                            <button type="button" class="btn btn-danger" onclick="submitReport()">ì‹ ê³ í•˜ê¸°</button>
                        </div>
                    </div>
                </div>
            `;

        document.body.appendChild(reportModal);
        const modal = new bootstrap.Modal(reportModal);
        modal.show();

        // ëª¨ë‹¬ì´ ë‹«í ë•Œ DOMì—ì„œ ì œê±°
        reportModal.addEventListener("hidden.bs.modal", () => {
          document.body.removeChild(reportModal);
        });
      }

      // ì‹ ê³  ì œì¶œ
      function submitReport() {
        const selectedReason = document.querySelector(
          'input[name="reportReason"]:checked'
        );
        const description = document.getElementById("reportDescription").value;

        if (!selectedReason) {
          showToast("ì‹ ê³  ì‚¬ìœ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”", "info");
          return;
        }

        // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì‹ ê³  ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼ í•¨
        const reportData = {
          targetUser: currentPost.author,
          reason: selectedReason.value,
          description: description,
          timestamp: new Date().toISOString(),
        };

        console.log("ì‹ ê³  ë°ì´í„°:", reportData);

        showToast("ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê²€í†  í›„ ì¡°ì¹˜í•˜ê² ìŠµë‹ˆë‹¤", "success");

        // ì‹ ê³  ëª¨ë‹¬ ë‹«ê¸°
        const reportModal = bootstrap.Modal.getInstance(
          document.querySelector(".modal.show")
        );
        reportModal.hide();

        // í¬ìŠ¤íŠ¸ ìƒì„¸ ëª¨ë‹¬ë„ ë‹«ê¸°
        setTimeout(() => {
          const postModal = bootstrap.Modal.getInstance(
            document.getElementById("postDetailModal")
          );
          postModal.hide();
        }, 300);
      }

      // íŒ”ë¡œìš° ìƒíƒœ ê´€ë¦¬
      let followingUsers = new Set();

      // íŒ”ë¡œìš° í† ê¸€
      function toggleFollow() {
        if (!currentPost) return;

        const followBtn = document.getElementById("followBtn");
        const isFollowing = followingUsers.has(currentPost.author);

        if (isFollowing) {
          // ì–¸íŒ”ë¡œìš°
          followingUsers.delete(currentPost.author);
          followBtn.textContent = "íŒ”ë¡œìš°";
          followBtn.classList.remove("following");
          showToast(`${currentPost.author}ë‹˜ì„ ì–¸íŒ”ë¡œìš°í–ˆìŠµë‹ˆë‹¤`, "info");
        } else {
          // íŒ”ë¡œìš°
          followingUsers.add(currentPost.author);
          followBtn.textContent = "íŒ”ë¡œì‰";
          followBtn.classList.add("following");
          showToast(`${currentPost.author}ë‹˜ì„ íŒ”ë¡œìš°í–ˆìŠµë‹ˆë‹¤`, "success");
        }
      }

      // í¬ìŠ¤íŠ¸ ìƒì„¸ ì—´ ë•Œ íŒ”ë¡œìš° ìƒíƒœ ì´ˆê¸°í™”
      function updateFollowButtonState(author) {
        const followBtn = document.getElementById("followBtn");
        const isFollowing = followingUsers.has(author);

        if (isFollowing) {
          followBtn.textContent = "íŒ”ë¡œì‰";
          followBtn.classList.add("following");
        } else {
          followBtn.textContent = "íŒ”ë¡œìš°";
          followBtn.classList.remove("following");
        }
      }

      // í† ìŠ¤íŠ¸ ì•Œë¦¼ í•¨ìˆ˜
      function showToast(message, type = "success") {
        const toast = document.createElement("div");
        toast.className = `toast-notification toast-${type} show`;
        toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-${
                      type === "success" ? "check-circle" : "info-circle"
                    }"></i>
                    <span>${message}</span>
                </div>
            `;

        document.body.appendChild(toast);

        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300);
        }, 3000);
      }

      // ì¹´í…Œê³ ë¦¬ í•„í„°ë§ í•¨ìˆ˜
      function filterByCategory(category) {
        // ëª¨ë“  ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ë¹„í™œì„±í™”
        document.querySelectorAll(".category-circle").forEach((b) => {
          b.style.background = "var(--gradient-primary)";
          b.style.transform = "scale(1)";
        });

        // í´ë¦­ëœ ë²„íŠ¼ í™œì„±í™”
        const clickedBtn = document.querySelector(
          `[data-category="${category}"]`
        );
        if (clickedBtn) {
          clickedBtn.style.background = "var(--gradient-secondary)";
          clickedBtn.style.transform = "scale(1.1)";
        }

        // í¬ìŠ¤íŠ¸ í•„í„°ë§
        let filteredPosts;
        if (category === "all") {
          filteredPosts = samplePosts;
        } else {
          filteredPosts = samplePosts.filter(
            (post) => post.category === category
          );
        }

        renderPosts(filteredPosts);

        // ì¹´í…Œê³ ë¦¬ëª… í‘œì‹œ
        const categoryNames = {
          daily: "ì¼ìƒ",
          farming: "ë†ì‚¬ì²´í—˜",
          food: "ì‹œê³¨ìŒì‹",
          nature: "ìì—°í’ê²½",
          culture: "ë¬¸í™”ì²´í—˜",
          animal: "ë™ë¬¼ì¹œêµ¬",
          season: "ê³„ì ˆë†ì‚¬",
          festival: "ë§ˆì„ì¶•ì œ",
        };

        const categoryName = categoryNames[category] || "ì „ì²´";
        showToast(`${categoryName} ì¹´í…Œê³ ë¦¬ë¡œ í•„í„°ë§í–ˆìŠµë‹ˆë‹¤`, "info");
      }

      // ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
      function initCategoryButtons() {
        document.querySelectorAll(".category-circle").forEach((btn) => {
          btn.addEventListener("click", (e) => {
            e.preventDefault();
            const category = btn.dataset.category;
            filterByCategory(category);
          });
        });
      }

      // í•„í„° íƒ­ ê¸°ëŠ¥
      document.querySelectorAll(".filter-tab").forEach((tab) => {
        tab.addEventListener("click", (e) => {
          e.preventDefault();

          // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
          document
            .querySelectorAll(".filter-tab")
            .forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");

          const filter = tab.dataset.filter;
          let filteredPosts = [...samplePosts];

          switch (filter) {
            case "popular":
              filteredPosts.sort((a, b) => b.likes - a.likes);
              break;
            case "recent":
              filteredPosts.reverse();
              break;
            case "following":
              // íŒ”ë¡œì‰ í•„í„° ë¡œì§ (ì„ì‹œ)
              filteredPosts = filteredPosts.slice(0, 4);
              break;
            default:
              break;
          }

          renderPosts(filteredPosts);
        });
      });

      // ì´ˆê¸° ë Œë”ë§
      document.addEventListener("DOMContentLoaded", () => {
        renderPosts();
        initCategoryButtons();
      });
    </script>
  </body>
</html>
